<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MQLUNIT: MQLUNIT Developer Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MQLUNIT
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MQLUNIT Developer Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Assertion Framework</h2>
<p>Although MQL4 is pretty close syntactically to C++, it lacks a lot of C++ features such as multiple inheritance, runtime type information (RTTI) and exceptions.</p>
<p>Traditionally, in JUnit and CppUnit assertion failures are thrown as exceptions. Unfortunately this can't be done in MQL4. Although <a href="https://mqllab.github.io/MQLLIB">MQLLIB</a> includes some rudementary exception emulation layer, it is unsuitable for our purposes here.</p>
<p>The following convention, therefore, has been established. Assertion methods of <a class="el" href="classMQLUNIT__Assert.html" title="A set of assert methods. ">MQLUNIT_Assert</a> class return string value. The value is set to <code>NULL</code> if the assertion was successful, otherwise the method returns a <code>message</code> parameter passed to the function (which is a user defined failure description).</p>
<p>Please take time to examine <a class="el" href="classMQLUNIT__Assert.html" title="A set of assert methods. ">MQLUNIT_Assert</a> class and corresponding <code>MQLUNIT_AssertTest</code> test case to understand an assertion framework of MQLUNIT.</p>
<h2>Test Execution Model</h2>
<p>All test cases and test suites are derived from <a class="el" href="classMQLUNIT__Test.html" title="Base class for all tests. ">MQLUNIT_Test</a> class. Each test is executed by calling <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> method. End users of MQLUNIT never implement <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> directly. Instead they use a set of macros that builds this method.</p>
<p><a class="el" href="MQLUNIT_8mqh.html#a262b6fc68f99bccdf48251b6d1964823">MQLUNIT_START</a> starts the implementation of <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> method.</p>
<p>Each pair of <a class="el" href="MQLUNIT_8mqh.html#af19cf2a82cf274bf7c72dfa8286bc36e">TEST_START</a> and <a class="el" href="MQLUNIT_8mqh.html#a806749d46ee4a9acd0a9d9e416f80d98">TEST_END</a> macros adds a code for a particular test method inline right into <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> implementation body.</p>
<p><code>ASSERT</code> macros run assertions and add any encountered failures as <a class="el" href="classMQLUNIT__TestFailure.html" title="Record of a failed Test execution. ">MQLUNIT_TestFailure</a> to the list of test failures.</p>
<p><a class="el" href="MQLUNIT_8mqh.html#af2419fce979f62ff6fb8af68a1bae034">MQLUNIT_END</a> macro finishes the <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> implementation.</p>
<h2>Set Up and Tear Down</h2>
<p>As in JUnit and CppUnit, <a class="el" href="classMQLUNIT__TestCase.html" title="A test case defines the fixture to run multiple tests. ">MQLUNIT_TestCase</a> defines <a class="el" href="classMQLUNIT__TestCase.html#a59a95eda39dd2ac7292a28e218b010ce" title="Set up context before running a test. ">MQLUNIT_TestCase::setUp</a> and <a class="el" href="classMQLUNIT__TestCase.html#ac52a95e87f26e13cc07ef8b787f7f99f" title="Clean up after the test run. ">MQLUNIT_TestCase::tearDown</a> methods. <a class="el" href="classMQLUNIT__TestCase.html#a59a95eda39dd2ac7292a28e218b010ce" title="Set up context before running a test. ">MQLUNIT_TestCase::setUp</a> is executed before each test method and <a class="el" href="classMQLUNIT__TestCase.html#ac52a95e87f26e13cc07ef8b787f7f99f" title="Clean up after the test run. ">MQLUNIT_TestCase::tearDown</a> is executed after each test method.</p>
<p><a class="el" href="MQLUNIT_8mqh.html#af19cf2a82cf274bf7c72dfa8286bc36e">TEST_START</a> and <a class="el" href="MQLUNIT_8mqh.html#a806749d46ee4a9acd0a9d9e416f80d98">TEST_END</a> macros are responsible for this functionality.</p>
<h2>Event System</h2>
<p>MQLUNIT includes <a class="el" href="classMQLUNIT__TestListener.html" title="A Listener for test progress. ">MQLUNIT_TestListener</a> interface that defines events that get emitted during the test execution. Separate events are emitted when test case execution starts, before and after each test method and at the end of the test case.</p>
<p>These events are fired by <a class="el" href="MQLUNIT_8mqh.html#a262b6fc68f99bccdf48251b6d1964823">MQLUNIT_START</a>, <a class="el" href="MQLUNIT_8mqh.html#af19cf2a82cf274bf7c72dfa8286bc36e">TEST_START</a>, <a class="el" href="MQLUNIT_8mqh.html#a806749d46ee4a9acd0a9d9e416f80d98">TEST_END</a>, and <a class="el" href="MQLUNIT_8mqh.html#af2419fce979f62ff6fb8af68a1bae034">MQLUNIT_END</a> macros and are embedded into the generated <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> implementation.</p>
<p>In the case of assertion failure, the appropriate <code>ASSERT</code> macro fires the event.</p>
<p><a class="el" href="classMQLUNIT__TestResult.html" title="Test result collects the results of executing a test. ">MQLUNIT_TestResult</a> collector class contains the list of registered <a class="el" href="classMQLUNIT__TestListener.html" title="A Listener for test progress. ">MQLUNIT_TestListener</a> and calls event handling methods on each one of them.</p>
<h2>Test Hierarchy</h2>
<p>It is possible to build a test hierarchy off <a class="el" href="classMQLUNIT__Test.html" title="Base class for all tests. ">MQLUNIT_Test</a>. The child test's implementation of <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> is responsible for calling <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> implementation on its parent. Helper macro <a class="el" href="MQLUNIT_8mqh.html#a46e43eebbb091d7a0dfa3f2104552c3d">MQLUNIT_INHERIT</a> has been added for this purpose. It makes sure the parent's <a class="el" href="classMQLUNIT__Test.html#a03c498067b4430466c9fd335b1e955ed" title="Runs the test. ">MQLUNIT_Test::run</a> implementation is called and passes an <code>inherited</code> parameter set to <code>true</code>. The purpose of this parameter is to prevent parent test from firing events on a test case start and a test case end (the child test fires them and, essentially, wraps a parent test). </p>
</div></div><!-- contents -->
<hr>
<table width="100%">
  <tr>
    <td>
    </td>
    <td align="right" valign="center">
      Copyright &copy; 2017 <a href="https://www.eneset.com">Eneset Group Trust</a><br>
    </td>
  </tr>
</table>
</body>
</html>
